# Task: Create CodeTask Parser

## Description
Create the CodeTask struct and parser that reads .code-task.md files generated by /code-task-generator and converts them to Task objects.

## Background
The /code-task-generator skill creates .code-task-*.md files with structured content including description, requirements, and acceptance criteria. The parser extracts this information to create Tasks for the DAG.

## Reference Documentation
**Required:**
- Design: .sop/planning/design/detailed-design.md (Section 4.2 CodeTask struct)

**Note:** You MUST read the detailed design document before beginning implementation.

## Technical Requirements
1. Create `src/core/code_task.rs` with:
   ```rust
   pub struct CodeTask {
       pub id: String,
       pub file_path: PathBuf,
       pub title: String,
       pub description: String,
       pub acceptance_criteria: Vec<String>,
       pub dependencies: Vec<String>,
       pub complexity: Complexity,
   }

   pub enum Complexity { Low, Medium, High }
   ```
2. Implement parsing:
   - `CodeTask::from_file(path: &Path) -> Result<Self>`
   - `CodeTask::from_directory(dir: &Path) -> Result<Vec<Self>>`
3. Parse markdown structure to extract fields
4. Implement `to_task(&self) -> Task` conversion

## Dependencies
- Task from task-01
- Markdown parsing (regex or simple string parsing)

## Implementation Approach
1. Define CodeTask struct and Complexity enum
2. Implement from_file() parsing markdown sections
3. Parse: Title from # Task:, Description, Acceptance Criteria, Metadata
4. Implement from_directory() scanning for .code-task.md files
5. Implement to_task() creating Task with proper fields
6. Add tests with sample .code-task.md files

## Acceptance Criteria

1. **Single File Parsing**
   - Given a valid .code-task.md file
   - When CodeTask::from_file() is called
   - Then all fields are extracted correctly

2. **Directory Scanning**
   - Given a directory with 5 .code-task.md files
   - When CodeTask::from_directory() is called
   - Then 5 CodeTask objects are returned

3. **Task Conversion**
   - Given a CodeTask
   - When to_task() is called
   - Then Task is created with matching name and description

4. **Complexity Parsing**
   - Given metadata line "- **Complexity**: Medium"
   - When parsed
   - Then Complexity::Medium is extracted

5. **Missing Fields Handling**
   - Given a .code-task.md with optional fields missing
   - When parsed
   - Then defaults are used (no error)

## Metadata
- **Complexity**: Medium
- **Labels**: Core, Parser, Markdown, CodeTask
- **Required Skills**: Rust, file I/O, text parsing
